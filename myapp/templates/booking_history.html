{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'css/booking_history.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Mali:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;1,200;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">
    <title>‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</title>
</head>
<body class="body-wrapper">
    <div class="dashboard-container">
        
        <h1 class="dashboard-title">üìú ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h1>
    <!-- ‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏à‡∏≠‡∏á -->
    {% if bookings %}
    <h2 class="section-title"><i class="fas fa-calendar-check"></i> ‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏ö‡∏ö‡∏à‡∏≠‡∏á</h2>
    <div class="table-wrapper">
        <table class="order-table">
            <thead>
                <tr>
                    <th>‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏≠‡∏£‡πå‡∏™</th>
                    <th>‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</th>
                    <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏á</th>
                    <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</th>
                    <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</th>
                    <th>‡∏™‡∏•‡∏¥‡∏õ</th>
                    <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
                </tr>
            </thead>
            <tbody>
                {% for booking in bookings %}
                <tr>
                    <td>{{ booking.course.title }}</td>
                    <td>{{ booking.get_selected_course_display }}</td>
                    <td>{{ booking.booking_date|date:"d M Y, H:i" }}</td>
                    <td><span class="status-{{ booking.booking_status }}">{{ booking.get_booking_status_display }}</span></td>
                    <td><span class="status-{{ booking.payment_status }}">{{ booking.get_payment_status_display }}</span></td>
                    <td>
                        {% if booking.payment_slip %}
                            <a href="{{ booking.payment_slip.url }}" target="_blank">
                                <img src="{{ booking.payment_slip.url }}" alt="‡∏™‡∏•‡∏¥‡∏õ" class="slip-image">
                            </a>
                        {% else %}
                            <span class="text-muted">‡πÑ‡∏°‡πà‡∏°‡∏µ</span>
                        {% endif %}
                    </td>
                    <td><span class="badge badge-booking">‡∏à‡∏≠‡∏á</span></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}

    <!-- ‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠ -->
    {% if video_orders %}
    <h2 class="section-title"><i class="fas fa-video"></i> ‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏ö‡∏ö‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠</h2>
    <div class="table-wrapper">
        <table class="order-table">
            <thead>
                <tr>
                    <th>‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏≠‡∏£‡πå‡∏™</th>
                    <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ã‡∏∑‡πâ‡∏≠</th>
                    <th>QR ‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</th>
                    <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
                </tr>
            </thead>
            <tbody>
                {% for order in video_orders %}
                <tr>
                    <td>{{ order.course.title }}</td>
                    <td>{{ order.payment_date|date:"d M Y, H:i" }}</td>
                    <td>
                        {% if order.course.payment_qr %}
                            <a href="{{ order.course.payment_qr.url }}" target="_blank">
                                <img src="{{ order.course.payment_qr.url }}" alt="QR" class="slip-image">
                            </a>
                        {% else %}
                            <span class="text-muted">‡πÑ‡∏°‡πà‡∏°‡∏µ</span>
                        {% endif %}
                    </td>
                    <td><span class="badge badge-video">‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠</span></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        
        {% else %}
            <p class="no-booking">‚ùå ‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</p>
        {% endif %}
    </div>
</body>
</html>
